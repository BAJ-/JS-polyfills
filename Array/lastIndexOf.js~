/**
 * Detailed explanation of the code can be found here: http://javascript.boxsheep.com/polyfills/Array-prototype-lastIndexOf/
 *
 * NOTE: This is not one big polyfill but several ways to write the same polyfill.
 */

// Array.prototype.lastIndexOf using for-loop
if (!Array.prototype.lastIndexOf) {
    Array.prototype.lastIndexOf = function (elem, fIndex) {
        "use strict";
        var arr = this,
            frm = fIndex ? parseInt(fIndex) : arr.length - 1;
 
        for (frm; frm >= 0; frm--) {
            if (arr.hasOwnProperty(frm) && arr[frm] === elem) {
                return frm;
            }
        }
        return -1;
    };
}

// Array.prototype.lastIndexOf using recursion
if (!Array.prototype.lastIndexOf) {
    Array.prototype.lastIndexOf = function (elem, fIndex) {
        "use strict";
        var arr = this,
              frm = fIndex ? parseInt(fIndex) : arr.length - 1;
        return (function findElm(i) {
            return (i >= 0) ? (function () {
                if (arr.hasOwnProperty(frm) && arr[frm] === elem) {
                    return frm;
                }
                return findElm(frm--);
           }()) : -1;
        }(frm));
    };
}

// ECMAScript 5.1 compliant version (check the step by step guide on the website)

